package Gamemode
import PlayerData
import GameConstants
public int maxkills = 10
dialog gamemode
button array modebutton
int redscore = 0
int greenscore = 0

public function checkEnd()
	int redteamkills = 0
	for int i = 0 to 5
		redteamkills += pData[i].kills
	if redteamkills >= maxkills
		endgame(0)
	int greenteamkills = 0
	for int i = 6 to 11
		greenteamkills += pData[i].kills
	if greenteamkills >= maxkills
		endgame(1)
	

public function createDialog()
	gamemode = DialogCreate()
	DialogSetMessage(gamemode, "Select Gamemode")
	modebutton[0] = DialogAddButton(gamemode, "Short (30 points)", 111)
	modebutton[1] = DialogAddButton(gamemode, "Avarage (50 points)", 113)
	modebutton[2] = DialogAddButton(gamemode, "Long (80 points)", 112)
	DialogDisplay(players.get(0).p, gamemode,true)
	trigger t = CreateTrigger()
	TriggerRegisterDialogEvent(t, gamemode)
	TriggerAddAction(t,function getGameMode)

function getGameMode()
	button b = GetClickedButton()
	if b == modebutton[0]
		maxkills = 40
		DisplayTimedTextToForce(GetPlayersAll(), 12., colorcode[GetTriggerPlayer().getId()] + GetTriggerPlayer().getName() + "|r has chosen short game!")
	if b == modebutton[1]
		maxkills = 60
		DisplayTimedTextToForce(GetPlayersAll(), 12., colorcode[GetTriggerPlayer().getId()] + GetTriggerPlayer().getName() + "|r has chosen avarage game!")
	if b == modebutton[2]
		maxkills = 80
		DisplayTimedTextToForce(GetPlayersAll(), 12., colorcode[GetTriggerPlayer().getId()] + GetTriggerPlayer().getName() + "|r has chosen long game!")

function endgame(int winningteam)
	if winningteam == 1
		DisplayTimedTextToForce(GetPlayersAll(), 12., "Green has won the game!")
	else if winningteam == 0
		DisplayTimedTextToForce(GetPlayersAll(), 12., "Red has won the game!")